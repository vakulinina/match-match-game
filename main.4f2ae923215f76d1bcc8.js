(()=>{"use strict";var e={307:(e,t,n)=>{n.r(t)},752:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(723));t.default=class{constructor(e){this.rootElement=e,this.page=new i.default}render(){this.rootElement.append(...this.page.elements)}}},616:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(199)),a=s(n(496));t.default=class{constructor(){this.elements=[(new i.default).element,(new a.default).element]}}},496:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583)),a=s(n(591));class r extends i.default{constructor(){super("main",["about-game"]),this.form=new a.default,this.element.innerHTML="\n      <h2>How to play?</h2>\n      <ol class=\"how-to-play-list\">\n        <li>1. Register new player in game</li>\n        <li>2. Or don't (for now)</li>\n        <li>3. Start you new game! Remember card positions and match it before time's up.</li>\n      </ol>\n    ",this.element.append(this.form.element)}}t.default=r},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},819:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583)),a="flipped";class r extends i.default{constructor(e){super("li",["card","flipped"]),this.image=e,this.isOpen=!1,this.element.innerHTML=`\n      <div class="card-front">\n      </div>\n      <div class="card-back">\n        <img src=${e} alt="" />\n      </div>\n    `}open(){return this.isOpen=!0,new Promise((e=>{this.element.classList.add(a),this.element.addEventListener("transitionend",(()=>e()),{once:!0})}))}close(){return this.isOpen=!1,new Promise((e=>{this.element.classList.remove(a),this.element.addEventListener("transitionend",(()=>e()),{once:!0})}))}markWrong(){return new Promise((e=>{var t;const n="wrong";null===(t=this.element.lastElementChild)||void 0===t||t.classList.add(n),setTimeout((()=>{var t;null===(t=this.element.lastElementChild)||void 0===t||t.classList.remove(n),e()}),500)}))}markCorrect(){var e;null===(e=this.element.lastElementChild)||void 0===e||e.classList.add("correct")}}t.default=r},582:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583));class a extends i.default{constructor(){super("ul",["card-board"]),this.cards=[]}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){return this.cards=e,this.cards.forEach((e=>this.element.appendChild(e.element))),new Promise((e=>{setTimeout((()=>{this.cards.forEach((e=>e.close())),e()}),5e3)}))}}t.default=a},723:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(199)),a=s(n(914));t.default=class{constructor(){this.elements=[new i.default(!0).element,(new a.default).element]}}},914:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,a){function r(e){try{o(s.next(e))}catch(e){a(e)}}function l(e){try{o(s.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}o((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(583)),r=i(n(819)),l=i(n(582)),o=i(n(715)),u=i(n(566));class c extends a.default{constructor(){super("main",["game"]),this.isAnimation=!1,this.pairsOpen=0,this.cardsField=new l.default,this.timer=new o.default,this.element.append(this.timer.element,this.cardsField.element),this.totalPairs=8,this.start()}start(){return s(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[0],n=t.images.map((e=>`./images/${t.category}/${e}`));this.newGame(n)}))}newGame(e){return s(this,void 0,void 0,(function*(){this.cardsField.clear(),this.pairsOpen=0;const t=e.concat(e).map((e=>new r.default(e))).sort((()=>Math.random()-.5));t.forEach((e=>e.element.addEventListener("click",(()=>this.cardHandler(e))))),yield this.cardsField.addCards(t),this.timer.start()}))}cardHandler(e){return s(this,void 0,void 0,(function*(){if(!this.isAnimation&&!e.isOpen){if(this.isAnimation=!0,yield e.open(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!==e.image?(yield Promise.all([this.activeCard.markWrong(),e.markWrong()]),yield Promise.all([this.activeCard.close(),e.close()])):(this.activeCard.markCorrect(),e.markCorrect(),this.pairsOpen+=1,this.pairsOpen===this.totalPairs&&this.finish()),this.activeCard=void 0,this.isAnimation=!1}}))}getScore(){const e=100*this.totalPairs-10*this.timer.time;return e>0?e:0}finish(){this.timer.stop(),this.element.append(new u.default(this.getScore()).element)}}t.default=c},199:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583)),a=s(n(778)),r=s(n(451));class l extends i.default{constructor(e=!1){super("header",[]),this.startButton=new a.default,this.stopButton=new r.default,this.element.innerHTML='\n      <span class="logo">MATCH<br>MATCH</span>\n      <nav class="navbar">\n        <ul class="nav-items">\n          <li><a class="nav-link nav-link-active" data-href="about" href="#about">About Game</a></li>\n          <li><a class="nav-link" data-href="score" href="#score">Best Score</a></li>\n          <li><a class="nav-link" data-href="settings" href="#settings">Game Settings</a></li>\n        </ul>\n      </nav>\n    ',this.element.append(e?this.stopButton.element:this.startButton.element)}}t.default=l},167:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583));class a extends i.default{constructor(e){super("input",["form-submit-btn"]),this.element.setAttribute("type",e)}}t.default=a},591:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583)),a=s(n(167));class r extends i.default{constructor(){super("form",["register-form"]),this.submitBtn=new a.default("submit"),this.element.innerHTML='\n        <h2>Register new player</h2>\n        <label for="name">First Name</label>\n        <input class="form-input" type="text" name="user-name" id="user-name" required>\n        <label for="last-name">Last Name</label>\n        <input class="form-input" type="text" name="user-last-name" id="user-last-name" required>\n        <label for="email">E-mail</label>\n        <input class="form-input" type="email" name="user-email" id="user-email" required>\n        <br />\n    ',this.submitBtn.element.setAttribute("value","Add user"),this.submitBtn.element.addEventListener("click",(e=>{e.preventDefault(),r.isValid()&&(this.element.innerHTML="<p><b>You are registered</b><p>")})),this.element.append(this.submitBtn.element)}static isValid(){const e=[{element:document.querySelector("#user-name"),validity:e=>!/[~&!@#$%№*()_—+=|:;"'`<>,.?/^]|[0-9]/.test(e)},{element:document.querySelector("#user-last-name"),validity:e=>!/[~&!@#$%№*()_—+=|:;"'`<>,.?/^]|[0-9]/.test(e)},{element:document.querySelector("#user-email"),validity:e=>new RegExp(["^([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40","\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]","|\\x5c[\\x00-\\x7f])*\\x22)(\\x2e([^\\x00-\\x20\\x22\\x28\\x","29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x","22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)",")*\\x40([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3","e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80","-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(\\x2e([^\\x00-\\x20\\x22","\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xf","f]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f]",")*\\x5d))*$"].join("")).test(e)}];let t=!0;const n="invalid";return e.forEach((({element:e,validity:s})=>{e.value&&s(e.value)?e.classList.remove(n):(e.classList.add(n),t=!1)})),t}}t.default=r},240:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(199)),a=s(n(929));t.default=class{constructor(){this.elements=[(new i.default).element,(new a.default).element]}}},929:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583));class a extends i.default{constructor(){super("main",["score"]),this.element.innerHTML='\n      <h2>Best players</h2>\n      <ul>\n        <li class="score-list-item">\n          <p>Connor Mason</p>\n          <p>Score: 544</p>\n        </li>\n        <li class="score-list-item">\n          <p>Mike Kerr</p>\n          <p>Score: 377</p>\n        </li>\n        <li class="score-list-item">\n          <p>Brandon Flowers</p>\n          <p>Score: 376</p>\n        </li>\n        <li class="score-list-item">\n          <p>Marko Saaresto</p>\n          <p>Score: 375</p>\n        </li>\n        <li class="score-list-item">\n          <p>Patrick James Grossi</p>\n          <p>Score: 374</p>\n        </li>\n        <li class="score-list-item">\n          <p>Brendon Urie</p>\n          <p>Score: 373</p>\n        </li>\n        <li class="score-list-item">\n          <p>Matt Bellamy</p>\n          <p>Score: 372</p>\n        </li>\n        <li class="score-list-item">\n          <p>Lynn Gunn</p>\n          <p>Score: 371</p>\n        </li>\n        <li class="score-list-item">\n          <p>Jared Leto</p>\n          <p>Score: 370</p>\n        </li>\n        <li class="score-list-item">\n          <p>Hannah Reid</p>\n          <p>Score: 369</p>\n        </li>\n      </ul>\n    '}}t.default=a},490:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(199)),a=s(n(122));t.default=class{constructor(){this.elements=[(new i.default).element,(new a.default).element]}}},122:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583));class a extends i.default{constructor(){super("main",["settings"]),this.element.innerHTML='\n      <h2>Game settings</h2>\n      <label>Difficulty<br>\n        <select size="1" name="difficulty">\n          <option disabled>Choose difficulty</option>\n          <option value="8">4x4</option>\n          <option value="18">6x6</option>\n          <option value="32">8x8</option>\n        </select>\n      </label>\n      <label>Game cards<br>\n        <select size="1" name="cards-category">\n          <option disabled>Choose cards type</option>\n          <option value="cats">Cats</option>\n          <option value="cats">Dogs</option>\n        </select>\n      </label>\n    '}}t.default=a},778:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583));class a extends i.default{constructor(){super("a",[]),this.element.setAttribute("href","#game"),this.element.innerHTML='\n      <button class="game-btn">Start Game</button>\n    '}}t.default=a},451:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583));class a extends i.default{constructor(){super("a",[]),this.element.setAttribute("href","#about"),this.element.innerHTML='\n      <button class="game-btn">Stop Game</button>\n    '}}t.default=a},715:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583));class a extends i.default{constructor(){super("div",["timer"]),this.time=0,this.element.innerHTML="<span>00 : 00</span>"}start(){this.counter=window.setInterval((()=>this.tick()),1e3)}tick(){this.time+=1;const e=Math.trunc(this.time/60%60),t=Math.trunc(this.time%60);this.element.innerHTML=`\n      <span>\n        ${e<10?`0${e}`:e} :\n          ${t<10?`0${t}`:t}\n      </span>\n    `}stop(){clearInterval(this.counter)}}t.default=a},566:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(583));class a extends i.default{constructor(e){super("div",["win-popup"]),this.element.innerHTML=`\n      <p class="win-text">High five! <br> Your score is ${e}</p>\n      <a href="#score"><button class="new-game-btn">SCORE BOARD</button></a>\n    `}}t.default=a},607:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(307);const i=s(n(752)),a=s(n(250));window.onload=()=>{const e=document.getElementById("app");if(!e)throw Error("App root element not found");const t=new i.default(e),n=new a.default;n.handleRouting(t,window.location.hash.slice(1)),window.onpopstate=()=>{e.innerHTML="",n.handleRouting(t,window.location.hash.slice(1))}}},250:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(723)),a=s(n(616)),r=s(n(490)),l=s(n(240));t.default=class{constructor(){this.routes=[{name:"about",component(e){e.page=new a.default}},{name:"settings",component(e){e.page=new r.default}},{name:"score",component(e){e.page=new l.default}},{name:"game",component(e){e.page=new i.default}}],this.defaultRoute={name:"default",component(e){e.page=new a.default}},this.currentRoute=this.defaultRoute}handleRouting(e,t){this.currentRoute=this.routes.find((e=>e.name===t))||this.defaultRoute,this.currentRoute.component(e),e.render(),this.activateHeaderLink()}activateHeaderLink(){const e="nav-link-active",t=document.getElementsByClassName("nav-link");[...t].forEach((t=>t.classList.remove(e)));const n=[...t].find((e=>e instanceof HTMLElement&&e.dataset.href===this.currentRoute.name));null==n||n.classList.add(e)}}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})();